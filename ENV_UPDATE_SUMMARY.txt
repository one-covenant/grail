â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                     .ENV UPDATE QUICK REFERENCE                           â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“Š STATISTICS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Before:  74 lines, 14 variables
After:   135 lines, 39+ variables
Change:  +61 lines, +25 new variables, +1 updated, +2 removed

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ… WHAT WAS ADDED
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. GENERATION CONFIG (1 var)
   â””â”€ GRAIL_GENERATION_BATCH_SIZE=4

2. TRAINING CONFIG (10 vars)
   â”œâ”€ GRAIL_TRAINER_LR=2e-6
   â”œâ”€ GRAIL_TRAINER_EPOCHS=2
   â”œâ”€ GRAIL_TRAINER_BATCH_SIZE=4
   â”œâ”€ GRAIL_TRAINER_MAX_LENGTH=1024
   â”œâ”€ GRAIL_TRAINER_GRAD_CLIP=0.5
   â”œâ”€ GRAIL_TRAINER_WARMUP_STEPS=10
   â”œâ”€ GRAIL_TRAINER_KL_COEF=0.02
   â”œâ”€ GRAIL_TRAINER_ENTROPY_COEF=0.001
   â”œâ”€ GRAIL_TRAINER_ADV_CLIP_PERCENTILE=99.0
   â””â”€ GRAIL_TRAINER_GROUP_ADV_SUM_TOL=0.01

3. CHECKPOINT CONFIG (3 vars)
   â”œâ”€ GRAIL_CHECKPOINT_RETENTION_LIMIT=3
   â”œâ”€ GRAIL_CHECKPOINT_MILESTONE_INTERVAL=100
   â””â”€ GRAIL_CACHE_DIR=

4. NETWORK RETRY CONFIG (3 vars)
   â”œâ”€ BT_CALL_TIMEOUT=15.0
   â”œâ”€ BT_CALL_RETRIES=3
   â””â”€ BT_CALL_BACKOFF=5.0

5. ENVIRONMENT UPDATE (1 var)
   â””â”€ GRAIL_ENV: dev â†’ prod

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ¨ KEY FEATURES
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ“ Production Ready
  â€¢ Environment set to "prod"
  â€¢ All critical settings configured
  â€¢ Aligned with latest standards

âœ“ Fine-Tuning Control
  â€¢ 10 training hyperparameters
  â€¢ Batch size optimization
  â€¢ Checkpoint management

âœ“ Network Resilience
  â€¢ Timeout configuration
  â€¢ Automatic retry logic
  â€¢ Exponential backoff

âœ“ Resource Management
  â€¢ Checkpoint retention
  â€¢ Cache directory
  â€¢ Batch size tuning

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ¯ CURRENT WALLET SETUP
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Wallet Name:    grail
Coldkey:        grail
Hotkey:         final (production)
Network:        Finney (mainnet)
NetUID:         81
Environment:    prod

Available Hotkeys:
  â€¢ default  - 5EbnismoJnnKNfFnUwPLwEU6j2xeCbojoirmuMTf5J9mYnKm
  â€¢ main     - 5EsPTNLhExAAPYNZqyrn8crmuf77tRH9eBDEZwjadDa3gp9t
  â€¢ final    - 5F9uEDDovurwEJihzZSpKypipVy84EEAPHTt3EfepTjcQfij (current)
  â€¢ 81       - 5FKz1PAcB1y5vn3aGqNog2vyxagrKMjbkMRpdjY9cuXAG6pD

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âš™ï¸  TUNING RECOMMENDATIONS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

For Different GPU Memory:

24GB+ VRAM (H100/A100):
  GRAIL_GENERATION_BATCH_SIZE=8
  GRAIL_TRAINER_BATCH_SIZE=8

16GB VRAM (L40/RTX 4090):
  GRAIL_GENERATION_BATCH_SIZE=4  â† Current (good!)
  GRAIL_TRAINER_BATCH_SIZE=4

12GB VRAM (RTX 3090):
  GRAIL_GENERATION_BATCH_SIZE=2
  GRAIL_TRAINER_BATCH_SIZE=2

8GB VRAM (RTX 4070):
  GRAIL_GENERATION_BATCH_SIZE=1
  GRAIL_TRAINER_BATCH_SIZE=1

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“ FILE LOCATIONS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

.env file:           /home/shadeform/grail/.env
.env.example:        /home/shadeform/grail/.env.example
Wallet:              ~/.bittensor/wallets/grail/
Logs:                /tmp/grail-local.log
Cache:               ~/.cache/grail/ (default)

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ… VERIFICATION COMMANDS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

# Check .env is complete
wc -l ~/.env  # Should show 135 lines

# Verify wallet setup
btcli wallet overview --wallet.name grail --hotkey final

# List all wallets
btcli list

# Check env vars loaded
env | grep GRAIL_ | head -20

# Test GRAIL setup
uv run grail validate --help

# Monitor logs
tail -f /tmp/grail-local.log

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸš€ DEPLOYMENT CHECKLIST
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Before running validator:
  â˜ Source .env file
  â˜ Verify wallet config (grail/final)
  â˜ Check GPU memory meets requirements
  â˜ Confirm network connectivity
  â˜ Review hyperparameters for your GPU
  â˜ Monitor first few minutes for errors

During operation:
  â˜ Monitor GPU utilization
  â˜ Check memory usage
  â˜ Watch network calls (retries indicate issues)
  â˜ Review WandB metrics
  â˜ Check logs for warnings

Optimization:
  â˜ If OOM: Reduce batch sizes
  â˜ If low GPU util: Increase batch sizes
  â˜ If network issues: Increase BT_CALL_TIMEOUT
  â˜ If training slow: Adjust learning rate/epochs

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“ SUPPORT REFERENCE
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Common Issues:

1. "hotkey not found"
   â†’ Solution: Use one of: default, main, final, 81

2. "Out of memory"
   â†’ Solution: Reduce GRAIL_GENERATION_BATCH_SIZE or GRAIL_TRAINER_BATCH_SIZE

3. "Network timeout"
   â†’ Solution: Increase BT_CALL_TIMEOUT and/or BT_CALL_RETRIES

4. "WandB not logging"
   â†’ Solution: Check WANDB_API_KEY is set and WANDB_MODE=online

5. "Checkpoint not found"
   â†’ Solution: Check R2 credentials and GRAIL_CHECKPOINT_RETENTION_LIMIT

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ¨ Status: Production-Ready Configuration Complete! âœ¨

Date Updated: 2025-10-19
Configuration Version: Latest (aligned with .env.example)

